{"version":3,"file":"static/webpack/static/development/pages/news.js.16f153f545031331cddc.hot-update.js","sources":["webpack:///./pages/news.js"],"sourcesContent":["import { useState } from \"react\";\nimport Link from \"next/link\";\nimport { withRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport Router from \"next/router\";\nimport fetch from \"isomorphic-fetch\";\nimport Layout from \"../components/Layout\";\n// import Error from \"next/error\";\nimport Error from \"./_error\";\n\nconst News = ({ news, page }) => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const [values, setValues] = useState({\n        text: \"react\",\n        coolmsg: \"\"\n    });\n\n    const { text, coolmsg } = values;\n    // const [url, setUrl] = useState(\n    //     \"http://hn.algolia.com/api/v1/search?query=react\"\n    // );\n\n    // const handleTextChange = e => {\n    //     e.preventDefault();\n    //     setSearchQuery(e.target.value);\n    // };\n\n    const handleChange = name => event => {\n        setValues({ ...values, [name]: event.target.value });\n    };\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        // setUrl(`http://hn.algolia.com/api/v1/search?query=${searchQuery}`);\n        Router.push(`/news/?searchTerm=${text}`);\n    };\n\n    const loadMore = e => {\n        e.preventDefault();\n        console.log(\"loadmore\");\n        Router.push(`/news/?searchTerm=${text}&page=${setCurrentPage + 1}`);\n    };\n    const searchForm = () => (\n        <form onSubmit={handleSubmit}>\n            <input type=\"text\" value={text} onChange={handleChange(\"text\")} />\n            <input\n                type=\"text\"\n                value={coolmsg}\n                onChange={handleChange(\"coolmsg\")}\n                placeholder=\"Write something..\"\n            />\n            <button>Search</button>\n        </form>\n    );\n\n    if (news.length === 0) {\n        return <Error message=\"No blogs found\" />;\n    }\n    return (\n        <Layout mainTitle=\"News\">\n            <div>\n                <h2>List of News</h2>\n                <hr />\n                {coolmsg}\n                <hr />\n                {searchForm()}\n                <hr />\n                {news.map(n => (\n                    <p key={n.objectID}>\n                        <a href={n.url}>{n.title}</a>\n                    </p>\n                ))}\n                <hr />\n                {page > 1 ? (\n                    <button\n                        onClick={() =>\n                            Router.push(\n                                `/news/?searchTerm=${text}&page=${page - 1}`\n                            )\n                        }\n                    >\n                        Previous {page - 1}\n                    </button>\n                ) : (\n                    \"\"\n                )}\n\n                <button>Current {page}</button>\n\n                <button\n                    onClick={() =>\n                        Router.push(\n                            `/news/?searchTerm=${text}&page=${page + 1}`\n                        )\n                    }\n                >\n                    Next {page + 1}\n                </button>\n            </div>\n        </Layout>\n    );\n};\n\nNews.getInitialProps = async ({ query }) => {\n    let news;\n    try {\n        const res = await fetch(\n            `http://hn.algolia.com/api/v1/search?query=${query.searchTerm ||\n                \"react\"}&page=${query.page || 1}`\n        );\n        news = await res.json();\n        console.log(\"try\", news);\n    } catch (err) {\n        console.log(err);\n        news = [];\n        console.log(\"catch\");\n    }\n    return { news: news.hits, page: news.page };\n};\n\nexport default News;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAFA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AASA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAHA;AACA;AAYA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAQA;AACA;AAAA;AACA;AAAA;AAFA;AAQA;AAAA;AAAA;AADA;AAgBA;AAAA;AAAA;AADA;AAYA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAbA;AAAA;AAcA;AAAA;AAAA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAgBA;;;;A","sourceRoot":""}